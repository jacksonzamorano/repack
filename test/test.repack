snippet base {
	id uuid db:pk
	created_date datetime db:default("NOW()")
}

enum UserType #model {
	Admin
	User
	Guest
}

struct User @users #model {
	!base

	last_login datetime?
	name string
	email string
	user_type UserType
	subscription_id string?


	query UserByEmail(_email string) = "SELECT $fields FROM $table WHERE $email = $_email" : one
	query UsersByType(_typ UserType) = "SELECT $fields FROM $table WHERE $user_type = $_typ" : many
	query DeleteUserById(_id uuid) = "DELETE FROM $table WHERE $id = $_id"
}

struct Token @tokens #model {
	!base
	user_id uuid ref(User.id)
	token_value uuid
}

struct UserWithToken: User {
	user_id super.id
}
