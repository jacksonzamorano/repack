output description @test/ {
	print_commands false
}

output postgres @test/ #backend;
output typescript_class @test/ts_classes {
	make_index true
}
output typescript_interface @test/ts_interfaces {
	make_index true
}

record SentEmail @sentemails #backend {
	id int32 #pk #increment
	user_id ref(User.id)
	org_id ref(Organization.id)
}

record User @users #backend {
	id int32 #pk #increment
	name string
	email string?
	password string
	last_login datetime?
	organization_id ref(Organization.id) #cascade
}

record Organization @orgs #backend {
	id int32 #pk #increment
	name string
	email string
}

struct OrganizationUser {
	organization Organization
	user User
}

struct OrganizationDirectory {
	organization Organization
	user User #many
}